---
import type { GetStaticPaths } from 'astro';

import Layout from '~/layouts/LandingLayout.astro';
import Hero from '~/components/widgets/Hero.astro';

import { getStaticPathsBlogList } from '~/utils/blog';

export const prerender = true;

export const getStaticPaths = (async ({ paginate }) => {
  return await getStaticPathsBlogList({ paginate });
}) satisfies GetStaticPaths;

const metadata = {
  title: 'D20 Resources',
  openGraph: {
    type: 'blog',
  },
};

// Define sections for each SRD
const srdSections = {
  modern: {
    title: 'Modern D20 SRD',
    baseHref: '/modern.d20.srd',
    links: [
      { title: 'Basics', href: '/modern.d20.srd/basics' },
      { title: 'Classes', href: '/modern.d20.srd/classes' },
      { title: 'Combat', href: '/modern.d20.srd/combat' },
      { title: 'Condition Summary', href: '/modern.d20.srd/conditions' },
      { title: 'Creature Types', href: '/modern.d20.srd/creature.types' },
      { title: 'Creatures', href: '/modern.d20.srd/creatures' },
      { title: 'Equipment', href: '/modern.d20.srd/equipment' },
      { title: 'Feats', href: '/modern.d20.srd/feats' }
    ]
  },
  future: {
    title: 'Future D20 SRD',
    baseHref: '/future.d20.srd',
    links: [
      { title: 'Classes', href: '/future.d20.srd/classes' },
      { title: 'Cybernetics', href: '/future.d20.srd/cybernetics' },
      { title: 'Environments', href: '/future.d20.srd/environments' },
      { title: 'Equipment', href: '/future.d20.srd/equipment' },
      { title: 'Expanded Skills', href: '/future.d20.srd/expanded.skills' },
      { title: 'Feats', href: '/future.d20.srd/feats' },
      { title: 'Mecha', href: '/future.d20.srd/mecha' },
      { title: 'Mutations', href: '/future.d20.srd/mutations' }
    ]
  },
  arcana: {
    title: 'Arcana D20 SRD',
    baseHref: '/arcana.d20.srd',
    links: [
      { title: 'Advanced Classes', href: '/arcana.d20.srd/advanced.classes' },
      { title: 'Creatures', href: '/arcana.d20.srd/creatures' },
      { title: 'Equipment', href: '/arcana.d20.srd/equipment' },
      { title: 'Feats', href: '/arcana.d20.srd/feats' },
      { title: 'FX Items', href: '/arcana.d20.srd/fx.items' },
      { title: 'Incantations', href: '/arcana.d20.srd/incantations' },
      { title: 'Occupations', href: '/arcana.d20.srd/occupations' },
      { title: 'Organizations', href: '/arcana.d20.srd/organizations' }
    ]
  },
  menaces: {
    title: 'D20 Menaces',
    baseHref: '/menaces.d20',
    links: [
      { title: 'Buying Services', href: '/menaces.d20/buying.services' },
      { title: 'Feats', href: '/menaces.d20/feats' },
      { title: 'Menaces', href: '/menaces.d20/menaces' }
    ]
  }
};
---

<Layout metadata={metadata}>
  <Hero>
    <Fragment slot="title">
      <span class="text-accent dark:text-white highlight">D20 Resources</span>
    </Fragment>
    <Fragment slot="subtitle">
      <span class="hidden sm:inline">It was created with the idea of making playing d20 games easier.</span>
    </Fragment>
  </Hero>

  <section class="px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 sm:py-8 lg:py-10 mx-auto max-w-[1400px] relative min-h-[60vh]">
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 relative z-10">
      
      {Object.entries(srdSections).map(([key, section]) => (
        <div class="bg-white/90 dark:bg-gray-800/20 backdrop-blur-lg rounded-xl p-6 border border-gray-300/60 dark:border-gray-600/40 hover:bg-white/95 dark:hover:bg-gray-800/30 hover:border-gray-400/70 dark:hover:border-gray-500/50 transition-all duration-300 flex flex-col">
          <h3 class="text-lg font-bold mb-6">
          <a href={section.baseHref} class="text-primary hover:text-primary/80 transition-colors">{section.title}</a>
          </h3>
          
          <div class="flex-grow mb-6">
            <div class="grid grid-cols-1 gap-4 text-sm">
            <ul class="space-y-2 text-muted">
            {section.links.map((link) => (
                  <li><a href={link.href} class="hover:text-primary transition-colors">{link.title}</a></li>
            ))}
            </ul>
            </div>
          </div>
          
          <div class="mt-auto pt-4 border-t border-gray-200/50 dark:border-gray-700/20">
          <a href={section.baseHref} class="inline-flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-primary hover:text-white hover:bg-primary/20 border border-white/20 rounded-lg transition-all duration-300">
            View More
            <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
          </div>
        </div>
      ))}

    </div>

  <!-- Bookmark  -->
    <div class="mt-8 relative z-10">
      <div class="bg-white/90 dark:bg-gray-800/20 backdrop-blur-lg rounded-xl p-6 border border-gray-300/60 dark:border-gray-600/40 hover:bg-white/95 dark:hover:bg-gray-800/30 hover:border-gray-400/70 dark:hover:border-gray-500/50 transition-all duration-300">
      <h3 class="text-lg font-bold mb-6 text-primary">Bookmark Downloads</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 text-sm">
      <a href="bookmarks/EntireSite_Bookmarks.html" download="EntireSite_Bookmarks.html" class="hover:text-primary transition-colors p-3 rounded-lg hover:bg-gray-50/50 dark:hover:bg-gray-700/20">Entire Site</a>
      <a href="/bookmarks/Modern_D20_Bookmarks.html" download="Modern_D20_Bookmarks.html" class="hover:text-primary transition-colors p-3 rounded-lg hover:bg-gray-50/50 dark:hover:bg-gray-700/20">Modern D20 SRD</a>
      <a href="/bookmarks/Future_D20_Bookmarks.html" download="Future_D20_Bookmarks.html" class="hover:text-primary transition-colors p-3 rounded-lg hover:bg-gray-50/50 dark:hover:bg-gray-700/20">Future D20 SRD</a>
      <a href="/bookmarks/Arcana_D20_Bookmarks.html" download="Arcana_D20_Bookmarks.html" class="hover:text-primary transition-colors p-3 rounded-lg hover:bg-gray-50/50 dark:hover:bg-gray-700/20">Arcana D20 SRD</a>
      <a href="/bookmarks/Menaces_D20_Bookmarks.html" download="Menaces_D20_Bookmarks.html" class="hover:text-primary transition-colors p-3 rounded-lg hover:bg-gray-50/50 dark:hover:bg-gray-700/20">Menaces D20</a>
      <a href="/bookmarks" class="hover:text-primary transition-colors p-3 rounded-lg hover:bg-gray-50/50 dark:hover:bg-gray-700/20">Instructions</a>
      </div>
      </div>
    </div>

  </section>
</Layout>